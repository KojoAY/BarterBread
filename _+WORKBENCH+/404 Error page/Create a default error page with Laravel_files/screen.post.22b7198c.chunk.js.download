(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"./src/components/post/InResponseToPostPreview.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),s=n("./node_modules/react/index.js"),a=n.n(s),l=n("./node_modules/graphql-tag/src/index.js"),c=n.n(l),i=n("./src/components/post/paragraph/TextParagraph.jsx"),u=n("./src/components/ui/Card.jsx"),p=n("./src/framework/design-system/components/index.js"),d=n("./src/util/routes.js"),m=n("./src/util/numbers.js"),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var g=function(e){e.styles;var t=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["styles"]);return a.a.createElement("svg",f({width:"19",height:"19",viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},t),a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M6.93 15.34l-2.06-2.06c-2.16-2.16-3.53-3.15-2.9-3.79.33-.32.8-.39 1.2 0l2.13 2.2c.08.08.16.07.38.13.21.05.36-.05.54-.23.17-.16.07-.6-.09-.77L3.5 8.2c-.37-.36-.5-1-.1-1.39.37-.37.8-.19 1.14.15.39.38 2.7 2.76 2.7 2.76a.42.42 0 0 0 .3.13.54.54 0 0 0 .33-.16c.17-.16.25-.46.09-.63 0 0-1.34-1.4-1.82-1.88-.71-.72-.77-1.22-.46-1.54.45-.44 1.05-.3 1.86.62l3.58 3.89-.75-1.95s-.47-1.25 0-1.5.84.4 1.17.9l1.86 3.34c1.01 1.65.69 3.8-.73 5.19-1.87 1.87-4.07.87-5.73-.78zM10.26.04H8.73l.77 3.3zM13.93 1.2L12.5.7l-.4 3.36zM6.5.57l-1.44.52L6.9 3.93z"}),a.a.createElement("path",{d:"M14.3 7.03c-.34-.5-.9-.52-1.25-.24-.25.19-.21.6-.2.9l1.51 2.64c1.17 1.9 1.33 3.66 0 5.45.4-.19.52-.23.9-.61 1.52-1.52 1.86-3.32.85-4.96l-1.8-3.18z"})))},b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var h=function(e){e.styles;var t=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["styles"]);return a.a.createElement("svg",b({width:"19",height:"19",viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},t),a.a.createElement("path",{d:"M16.19 9.42c0 1.67-.72 2.84-2.03 4l-.1.09v.13a4.3 4.3 0 0 0 .15.85c.17.6.46 1.2.86 1.8a4.94 4.94 0 0 1-2.46-.84c-.26-.17-.33-.2-.54-.4l-.13-.12-.16.05c-.68.2-2.75.46-4.88-.16a5.9 5.9 0 0 1-4.1-5.4c0-3.37 3-6.12 6.7-6.12s6.69 2.75 6.69 6.12z",fillRule:"evenodd"}))},v=n("./src/util/quote.js"),j=n("./src/components/stream/Quote.jsx");function x(){var e=o()(["\n  fragment InResponseToPostPreview_mediaResource on Post {\n    inResponseToMediaResource {\n      mediumQuote {\n        ...Quote_quote\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function y(){var e=o()(["\n  fragment InResponseToPostPreview_postResult on PostResult {\n    __typename\n    ... on Post {\n      id\n      title\n      mediumUrl\n      creator {\n        id\n        name\n      }\n      clapCount\n      responsesCount\n    }\n  }\n"]);return y=function(){return e},e}n.d(t,"a",function(){return w}),n.d(t,"c",function(){return O}),n.d(t,"b",function(){return R});var _={flexGrow:"1"},P={flexGrow:"0"},E={display:"flex",flexDirection:"row",alignItems:"center"},w=function(e){var t,n=e.inResponseToPostResult,r=e.inResponseToMediaResource,o=e.padding;if(n)switch(n.__typename){case"Post":t=n}if(!t)return null;var a=t.title,l=t.creator&&t.creator.name,c=parseInt(t.clapCount,10),f=parseInt(t.responsesCount,10),b=r&&r.mediumQuote&&Object(v.a)(r.mediumQuote),j=b&&b.type,x=s.createElement(p.f,{href:Object(d.N)(t)},s.createElement(u.a,null,s.createElement(p.z,{ui:"REGULAR"},s.createElement(p.H,null,function(e){return s.createElement(p.b,{paddingLeft:"20px",paddingRight:"20px"},b&&j&&s.createElement(p.b,{paddingBottom:"20px"},s.createElement(i.b,{paragraph:b,paragraphStyle:j,spaceTop:10,richTextStyle:"STREAM"})),s.createElement(p.b,{display:"flex",flexDirection:"row"},s.createElement("div",{className:e([_,E])},s.createElement(p.d,{strong:!0},a)),s.createElement(p.d,null,s.createElement("div",{className:e([P,E])},c>0?s.createElement("div",{className:e(E)},s.createElement(p.b,{tag:g,marginRight:"4px"}),s.createElement("div",null,Object(m.b)(c))):null,f>0?s.createElement("div",{className:e(E)},s.createElement(p.b,{tag:h,marginLeft:"8px",marginRight:"4px"}),s.createElement("div",null,Object(m.b)(f))):null))),s.createElement(p.d,null,l))}))));return o?s.createElement(p.b,{padding:o},x):x},O=c()(y()),R=c()(x(),j.a)},"./src/components/stream/Quote.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),s=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(s),l=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(l),i=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(i),p=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(p),m=n("./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(m),g=n("./node_modules/react/index.js"),b=n("./node_modules/graphql-tag/src/index.js"),h=n.n(b),v=n("./src/framework/design-system/components/index.js"),j=n("./src/util/routes.js"),x=n("./src/components/post/paragraph/TextParagraph.jsx"),y=n("./src/util/quote.js");function _(){var e=o()(["\n  fragment Quote_quote on Quote {\n    quoteId\n    userId\n    post {\n      id\n      title\n      mediumUrl\n      creator {\n        id\n        username\n        name\n      }\n    }\n    startOffset\n    endOffset\n    paragraphs {\n      text\n      type\n      markups {\n        anchorType\n        end\n        href\n        rel\n        start\n        title\n        type\n        userId\n      }\n      ...TextParagraph_paragraph\n    }\n  }\n  ","\n"]);return _=function(){return e},e}var P=function(e){function t(){return a()(this,t),u()(this,d()(t).apply(this,arguments))}return f()(t,e),c()(t,[{key:"render",value:function(){var e=this.props.quote;if(!e||null==e.startOffset||null==e.endOffset||!e.post||!e.post.id)return null;var t=e.post.title,n=e.post.creator&&e.post.creator.name,r=e.post.creator&&e.post.creator.username;if(!n||!r)return null;var o=Object(y.a)(e),s=o&&o.type;return o&&s?g.createElement(v.b,{paddingLeft:"20px",paddingRight:"20px"},g.createElement(v.z,{ui:"REGULAR"},g.createElement(v.d,null,"From"," ",g.createElement(v.u,{href:Object(j.N)(e.post),inline:!0},t)," ","by"," ",g.createElement(v.u,{href:Object(j.sb)(r),inline:!0},n))),g.createElement(v.f,{href:Object(j.N)(e.post)},g.createElement(x.b,{paragraph:o,paragraphStyle:s,spaceTop:30,richTextStyle:"STREAM"}))):null}}]),t}(g.Component);t.b=P;var E=h()(_(),x.b.fragments.paragraph)},"./src/components/ui/Card.jsx":function(e,t,n){"use strict";var r=n("./src/components/style/index.js"),o=Object(r.b)("div",function(e){var t=e.theme;return{backgroundColor:t.backgroundColor,border:"1px solid ".concat(t.baseColor.border.lighter),borderRadius:"5px",boxShadow:"0 1px 4px ".concat(t.baseColor.border.lighter),marginBottom:"24px",padding:"23px 0"}});t.a=o},"./src/handlers/PostHandler.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),s=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/graphql-tag/src/index.js"),c=n.n(l),i=n("./node_modules/react-apollo/react-apollo.esm.js"),u=n("./src/screens/ErrorScreen.jsx"),p=n("./src/screens/LoadingScreen.jsx"),d=n("./src/components/meter/MeterController.jsx"),m=n("./src/components/session/RequireFlag.jsx"),f=n("./src/components/susi/FreePostSusiController.jsx"),g=n("./src/screens/NotFoundScreen.jsx"),b=n("./src/components/post/PostCanonicalizer.js"),h=n("./src/screens/PostScreen.jsx");function v(){var e=o()(["\n  query PostHandler($postId: ID!, $postMeteringOptions: PostMeteringOptions) {\n    meterPosts(postIds: [$postId], postMeteringOptions: $postMeteringOptions) {\n      __typename\n      ... on MeteringInfo {\n        ...PostScreen_meteringInfo\n        ...MeterController_meteringInfo\n      }\n    }\n    postResult(id: $postId) {\n      __typename\n      ... on Post {\n        ...MeterController_post\n        ...PostScreen_post\n        ...PostCanonicalizer_post\n        ...FreePostSusiController_post\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}var j=c()(v(),d.a,d.b,h.b,h.a,b.b,f.a);t.default=Object(a.b)(function(e){return{source:e.navigation.referrerSource||void 0,referrer:e.navigation.referrer,shareKey:e.navigation.shareKey}})(function(e){var t=e.match,n=e.source,r=e.referrer,o=e.shareKey,a=t.params.postIdOrSlug||t.params.postSlug||t.params.postId;if(!a)return s.createElement(g.a,null);var l,c=/^(?:[^\/]*-)?([0-9a-f]+)$/.exec(a||"");return c&&(l=c[1]),l?s.createElement(i.c,{query:j,variables:{postId:l,postMeteringOptions:{source:n,referrer:r,sk:o}}},function(e){var n=e.loading,r=e.error,o=e.data,a=(o=void 0===o?{}:o).meterPosts,l=o.postResult;if(n)return s.createElement(p.a,null);if(r)return s.createElement(u.a,{error:r});switch(l.__typename){case"Post":var c=s.createElement(m.a,{name:"enable_lite_pardon_the_interruption"},s.createElement(f.b,{post:l})),i=s.createElement(m.a,{name:"enable_lite_meter_controller"},s.createElement(d.c,{meteringInfo:a,post:l}));return s.createElement(b.a,{post:l,matchedPath:t.url},l.isLocked?i:c,s.createElement(h.c,{post:l}));case"NotFound":return s.createElement(g.a,null);default:return s.createElement(u.a,{error:new Error("Unsupported postResult: ".concat(l.__typename))})}}):s.createElement(g.a,null)})},"./src/screens/PostScreen.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),s=n("./node_modules/react/index.js");function a(e){var t={__html:'<script type="application/json">'.concat(JSON.stringify(e.json),"<\/script>")};return s.createElement("amp-analytics",{id:"medium-analytics",dangerouslySetInnerHTML:t})}var l=n("./node_modules/graphql-tag/src/index.js"),c=n.n(l),i=n("./node_modules/react-redux/es/index.js"),u=n("./src/components/meter/RegWall.jsx"),p=n("./src/components/session/RequireFlag.jsx"),d=n("./src/framework/design-system/components/index.js"),m=n("./src/components/metabar/Metabar.jsx"),f=n("./src/components/post/body/InteractivePostBody.js"),g=n("./src/components/post/InResponseToPostPreview.jsx");function b(){var e=o()(["\n  fragment PostHeader_post on Post {\n    inResponseToPostResult {\n      ... on PostResult {\n        ...InResponseToPostPreview_postResult\n      }\n    }\n    ...InResponseToPostPreview_mediaResource\n  }\n  ","\n  ","\n"]);return b=function(){return e},e}function h(e){var t=e.post;return s.createElement(d.b,{paddingBottom:"1px"},s.createElement(d.k,{columns:8},s.createElement(p.a,{name:"enable_lite_response_post_header"},s.createElement(g.a,{inResponseToPostResult:t.inResponseToPostResult,inResponseToMediaResource:t.inResponseToMediaResource,padding:"10px 0 0"}))))}var v=c()(b(),g.c,g.b),j=n("./src/components/post/footer/PostFooter.jsx"),x=n("./src/components/post/PostMetadata.jsx"),y=n("./node_modules/lodash/get.js"),_=n.n(y),P=n("./src/WatchBounds.js"),E=n("./src/components/post/PostByline.jsx"),w=n("./src/components/post/NormalizePostBodyModel.js");function O(){var e=o()(["\n  fragment PostBodyInserts_post on Post {\n    ...PostByline_post\n  }\n  ","\n"]);return O=function(){return e},e}function R(e,t,n){return function(r){var o=n.subtitleIndex||n.titleIndex||0,a=t[o]&&t[o].name,l="number"==typeof n.titleIndex,c={marginTop:"32px"};return r[a]={order:0!==o||l?"after":"before",component:s.createElement(d.H,null,function(t){return s.createElement(P.a,{className:t(c),name:"byline",type:"byline",offset:{left:-600}},s.createElement(E.b,{avatarSize:48,post:e,showBio:!1}))})},r}}var I=c()(O(),E.a),T=n("./src/components/post/PostSidebar.jsx"),M=n("./src/framework/reporter/index.js"),k=n("./src/framework/track/index.js"),S=n("./src/screens/helpers/visits.js"),C=n("./src/components/post/helpers/loggedOutHistory.js"),B=n("./src/store/selectors/session.js"),L=n("./src/util/routes.js"),q=n("./src/util/theme.js"),D=n("./src/styles/breakpoints.js");function H(){var e=o()(["\n  fragment PostScreen_post on Post {\n    id\n    firstPublishedAt\n    isPublished\n    title\n    canonicalUrl\n    layerCake\n    primaryTopic {\n      name\n      slug\n    }\n    collection {\n      id\n      slug\n      ...Metabar_collection\n      ...RegWall_collection\n      ...ThemeUtil_accent\n    }\n    # please note that the postMeteringOptions are defined in the postHandler file\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    ...PostHeader_post\n    ...InteractivePostBody_post\n    ...PostBodyInserts_post\n    ...PostFooter_post\n    ...PostMetadata_post\n    ...PostReadTracker_post\n    ...PostScrollTracker_post\n    ...Metabar_post\n    ...RegWall_post\n    ...PostSidebar_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return H=function(){return e},e}function z(){var e=o()(["\n  fragment PostScreen_meteringInfo on MeteringInfo {\n    __typename\n    postIds\n    maxUnlockCount\n    unlocksRemaining\n  }\n"]);return z=function(){return e},e}function N(e){return Object(D.createBreakpointMaxWidths)(e).sm}n.d(t,"a",function(){return F}),n.d(t,"b",function(){return U});t.c=Object(i.b)(function(e){var t=e.client,n=e.config.authDomain,r=e.session;return{authDomain:n,theme:e.theme,isDnt:t.isDnt,isLoggedIn:Object(B.a)(r.user.id)}})(function(e){var t=e.authDomain,n=e.isAmp,r=void 0!==n&&n,o=e.isDnt,l=e.isLoggedIn,c=e.post,i=(e.theme,Object(M.c)()),g=s.useRef(),b=c.isPublished;s.useEffect(function(){b?(o||l||Object(S.e)(),i.event("post.clientViewed",{postId:c.id,collectionId:c.collection&&c.collection.id,collectionSlug:c.collection&&c.collection.slug,context:1})):i.event("post.draftViewed",{postId:c.id}),o||l||Object(C.b)(c.id)},[c.id,b]),Object(k.i)(g,c),Object(k.h)(o,l,g,c);var v=function(e){if(c&&c.collection&&c.collection.colorPalette){var t=c.collection.colorPalette,n=t.defaultBackgroundSpectrum,r=t.highlightSpectrum;return Object(q.b)(n,r)}return e},y=function(e){var t=_()(e,["content","bodyModel","paragraphs"]);if(t)return[R(e,t,Object(w.d)(t))].reduce(function(e,t){return t(e)},{})}(c),E=c.layerCake&&(1===c.layerCake||2===c.layerCake||3===c.layerCake),O=E?c.primaryTopic:null,I=c.content;if(!I)throw new Error("Expected post to have content.");var B=I.isLockedPreviewOnly;return s.createElement(s.Fragment,null,s.createElement(x.b,{isAmp:r,post:c}),s.createElement(d.J,null,function(e){return s.createElement(d.D,{theme:v(e)},s.createElement(m.c,{isFixed:!0,post:c,collection:c.collection,isAmp:r,isDraft:!b,topic:O,isMonogramOnly:!E,marginBottom:0,marginBottomSm:0,behavior:"undefined"!=typeof window&&window.innerWidth<N(e)?"aggressive":"none"}),s.createElement(P.c,null,s.createElement("article",null,s.createElement(h,{post:c}),s.createElement(f.b,{post:c,postBodyInserts:y,ref:g})),s.createElement(p.a,{name:"lite_post_pub_sidebar"},!B&&!!b&&s.createElement(T.b,{post:c})),B&&s.createElement(u.c,{collection:c.collection,post:c}),s.createElement(j.b,{post:c})))}),r?s.createElement(a,{json:{requests:{base:Object(L.e)(t),pageview:Object(L.b)(t),scrollPing:Object(L.d)(t)},vars:{postId:c.id,collectionId:c.collection?c.collection.id:void 0,canonicalUrl:c.canonicalUrl},triggers:{defaultPageview:{on:"visible",request:"pageview"},scrollDepths:{on:"scroll",scrollSpec:{verticalBoundaries:[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100]},request:"scrollPing"}},transport:{beacon:!1,xhrpost:!1,image:!0}}}):"")});var F=c()(z()),U=c()(H(),m.a,m.b,v,f.a,j.a,x.a,k.d,k.e,q.a,I,T.a,u.a,u.b)},"./src/util/quote.js":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("./node_modules/lodash/cloneDeep.js"),o=n.n(r);function s(e){if(1!==e.paragraphs.length)return null;var t=o()(e.paragraphs[0]),n=t.text||"",r=0,s=e.startOffset||0,a=e.endOffset||n.length;if(n.length-a>100&&(n=n.substring(0,a+100)+"…"),s>100){var l=s-100;n="…"+n.substring(l),r=l-1}t.text=n,t.type="P",t.markups.unshift({anchorType:null,end:a,href:null,rel:null,linkMetadata:null,start:s,title:null,type:"HIGHLIGHT",userId:null});var c=!0,i=!1,u=void 0;try{for(var p,d=t.markups[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var m=p.value;m.start-=r,m.end-=r}}catch(e){i=!0,u=e}finally{try{c||null==d.return||d.return()}finally{if(i)throw u}}return t}}}]);
//# sourceMappingURL=screen.post.22b7198c.chunk.js.map